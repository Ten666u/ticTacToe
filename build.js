(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{IY:()=>y,yw:()=>u,SB:()=>v});const t=()=>{let e=Math.floor(9*Math.random());if(v.gameOver||""!==v.board[e])return t();{let t=document.querySelectorAll(".cell")[e],r=new Event("click");t.dispatchEvent(r)}},r=(e,t,o)=>{const l=n(e);if(null!==l)return{X:-10,O:10,Tie:0}[l];if(o){let n=-1/0;for(let o=0;o<e.length;o++)if(""===e[o]){e[o]=v.currentPlayer;const l=r(e,t+1,!1);e[o]="",n=Math.max(l,n)}return n}{let n=1/0;for(let o=0;o<e.length;o++)if(""===e[o]){e[o]="X"===v.currentPlayer?"O":"X";const l=r(e,t+1,!0);e[o]="",n=Math.min(l,n)}return n}},n=e=>{const t=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(const r of t){const[t,n,o]=r;if(e[t]&&e[t]===e[n]&&e[t]===e[o])return e[t]}return e.includes("")?null:"Tie"},o=()=>{if(!v.gameOver){const e=(()=>{let e,t=-1/0;for(let n=0;n<v.board.length;n++)if(""===v.board[n]){v.board[n]=v.currentPlayer;const o=r(v.board,0,!1);v.board[n]="",o>t&&(t=o,e=n)}return e})();if(void 0!==e){const t=document.querySelectorAll(".cell")[e],r=new Event("click");t.dispatchEvent(r)}}},l=e=>{localStorage.setItem("state",JSON.stringify(e))},a=()=>{if(localStorage.state){let e=JSON.parse(localStorage.getItem("state"));switch(e.gameType){case"oneByOne":e.botMove=()=>{};break;case"easyBot":e.botMove=t;break;case"hardBot":e.botMove=o}return e}return!1},c=()=>{v.currentPlayer="X",v.board=["","","","","","","","",""],v.gameOver=!1,u.textContent="Ход игрока X",l(v),y.innerHTML='<div class="win_line" id="winLine"></div>',d()},d=()=>{y.innerHTML='<div class="win_line" id="winLine"></div>';let e=v.board;for(let t=0;t<=e.length-1;t++){let r=document.createElement("div");r.classList="cell",r.textContent=e[t],""!==e[t]&&(r.style.cursor="not-allowed"),r.addEventListener("click",s(t)),y.append(r)}i()},s=e=>t=>{let r=t.target;v.gameOver||""!==v.board[e]||(v.board[e]=v.currentPlayer,r.textContent=v.currentPlayer,r.style.cursor="not-allowed",v.currentPlayer="X"===v.currentPlayer?"O":"X",i(),"O"==v.currentPlayer&&!0!==v.gameOver&&"oneByOne"!==v.gameType&&(v.botMove(),console.log(v.botMove)),l(v))},i=()=>{const e=[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];for(let[t,r]of e.entries()){let[e,n,o]=r;if(v.board[e]&&v.board[e]===v.board[n]&&v.board[e]===v.board[o]){let r=document.getElementById("winLine");return r.style.display="block",r.style.zIndex=2,0<=t&&t<=2&&(r.style.width="100%",r.style.height="3px",r.style.top=42+85*t+"px"),3<=t&&t<=5&&(r.style.height="100%",r.style.width="3px",r.style.left=50+97*(t-3)+"px"),6<=t&&(r.style.height="150.7%",r.style.width="3px",r.style.left="50%",r.style.top="-65px",r.style.transform=6==t?"rotate(-48.7deg)":"rotate(48.7deg)"),u.textContent=`Победил игрок ${v.board[e]}!`,v.gameOver=!0,v.board[e]}}if(!v.board.includes(""))return v.gameOver=!0,void(u.textContent="Ничья!");u.textContent=`Ход игрока ${v.currentPlayer}`},y=document.getElementById("board"),u=document.getElementById("message"),g=document.getElementById("resetButton"),m=document.getElementById("typeSelect");let v={currentPlayer:"X",board:["","","","","","","","",""],gameOver:!1,gameType:"oneByOne",botMove:()=>{}};a()&&(v=a(),m.value=v.gameType),d(),m.addEventListener("change",(e=>{let r=e.target;if(r.value!=v.gameType){switch(r.value){case"easyBot":v.botMove=t;break;case"hardBot":v.botMove=o}v.gameType=r.value,c()}})),g.addEventListener("click",c)})();